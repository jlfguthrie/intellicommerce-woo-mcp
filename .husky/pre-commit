#!/usr/bin/env sh
# ✨IntelliCommerce✨ Woo MCP - Pre-commit Hook
# Made with 🧡 in Cape Town 🇿🇦
# Powered by Xstra AI✨ | Enabled by IntelliCommerce✨

echo "🔍 Running pre-commit validation..."

# Step 1: Format staged files (this will modify files)
echo "🎨 Formatting staged files..."
npx lint-staged

# Step 2: Add any formatting changes back to staging
echo "📦 Adding formatting changes to staging..."
git add .

# Step 3: Run type checking
echo "📝 Type checking..."
npm run typecheck

# Step 4: Run tests on formatted code
echo "🧪 Running tests..."
npm run test:unit

# Step 5: Build check
echo "🔨 Build check..."
npm run build

echo "✅ Pre-commit validation complete!"
