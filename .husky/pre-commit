#!/usr/bin/env sh
# âœ¨IntelliCommerceâœ¨ Woo MCP - Pre-commit Hook
# Made with ğŸ§¡ in Cape Town ğŸ‡¿ğŸ‡¦
# Powered by Xstra AIâœ¨ | Enabled by IntelliCommerceâœ¨

echo "ğŸ” Running pre-commit validation..."

# Step 1: Format staged files (this will modify files)
echo "ğŸ¨ Formatting staged files..."
npx lint-staged

# Step 2: Add any formatting changes back to staging
echo "ğŸ“¦ Adding formatting changes to staging..."
git add .

# Step 3: Run type checking
echo "ğŸ“ Type checking..."
npm run typecheck

# Step 4: Run tests on formatted code
echo "ğŸ§ª Running tests..."
npm run test:unit

# Step 5: Build check
echo "ğŸ”¨ Build check..."
npm run build

echo "âœ… Pre-commit validation complete!"
